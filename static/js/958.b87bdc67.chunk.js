"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[958],{9395:(n,e,o)=>{o.r(e),o.d(e,{default:()=>Y});var t=o(5043),r=o(1675),i=o(2555),c=o(3986);const l=["onSuccess","onError","useOneTap","promptMomentNotification","type","theme","size","text","shape","logo_alignment","width","locale","click_listener","containerProps"];const a=(0,t.createContext)(null);function s(n){let{clientId:e,nonce:o,onScriptLoadSuccess:r,onScriptLoadError:i,children:c}=n;const l=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nonce:e,onScriptLoadSuccess:o,onScriptLoadError:r}=n,[i,c]=(0,t.useState)(!1),l=(0,t.useRef)(o);l.current=o;const a=(0,t.useRef)(r);return a.current=r,(0,t.useEffect)((()=>{const n=document.createElement("script");return n.src="https://accounts.google.com/gsi/client",n.async=!0,n.defer=!0,n.nonce=e,n.onload=()=>{var n;c(!0),null===(n=l.current)||void 0===n||n.call(l)},n.onerror=()=>{var n;c(!1),null===(n=a.current)||void 0===n||n.call(a)},document.body.appendChild(n),()=>{document.body.removeChild(n)}}),[e]),i}({nonce:o,onScriptLoadSuccess:r,onScriptLoadError:i}),s=(0,t.useMemo)((()=>({clientId:e,scriptLoadedSuccessfully:l})),[e,l]);return t.createElement(a.Provider,{value:s},c)}function d(){const n=(0,t.useContext)(a);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function u(n){var e;return null!==(e=null===n||void 0===n?void 0:n.clientId)&&void 0!==e?e:null===n||void 0===n?void 0:n.client_id}const p={large:40,medium:32,small:20};function g(n){let{onSuccess:e,onError:o,useOneTap:r,promptMomentNotification:a,type:s="standard",theme:g="outline",size:f="large",text:h,shape:v,logo_alignment:m,width:x,locale:w,click_listener:y,containerProps:A}=n,b=(0,c.A)(n,l);const k=(0,t.useRef)(null),{clientId:S,scriptLoadedSuccessfully:j}=d(),I=(0,t.useRef)(e);I.current=e;const C=(0,t.useRef)(o);C.current=o;const _=(0,t.useRef)(a);return _.current=a,(0,t.useEffect)((()=>{var n,e,o,t,c,l,a,d,p;if(j)return null===(o=null===(e=null===(n=null===window||void 0===window?void 0:window.google)||void 0===n?void 0:n.accounts)||void 0===e?void 0:e.id)||void 0===o||o.initialize((0,i.A)({client_id:S,callback:n=>{var e;if(!(null===n||void 0===n?void 0:n.credential))return null===(e=C.current)||void 0===e?void 0:e.call(C);const{credential:o,select_by:t}=n;I.current({credential:o,clientId:u(n),select_by:t})}},b)),null===(l=null===(c=null===(t=null===window||void 0===window?void 0:window.google)||void 0===t?void 0:t.accounts)||void 0===c?void 0:c.id)||void 0===l||l.renderButton(k.current,{type:s,theme:g,size:f,text:h,shape:v,logo_alignment:m,width:x,locale:w,click_listener:y}),r&&(null===(p=null===(d=null===(a=null===window||void 0===window?void 0:window.google)||void 0===a?void 0:a.accounts)||void 0===d?void 0:d.id)||void 0===p||p.prompt(_.current)),()=>{var n,e,o;r&&(null===(o=null===(e=null===(n=null===window||void 0===window?void 0:window.google)||void 0===n?void 0:n.accounts)||void 0===e?void 0:e.id)||void 0===o||o.cancel())}}),[S,j,r,s,g,f,h,v,m,x,w]),t.createElement("div",(0,i.A)((0,i.A)({},A),{},{ref:k,style:(0,i.A)({height:p[f]},null===A||void 0===A?void 0:A.style)}))}var f,h,v,m,x,w,y,A,b,k,S,j,I,C,_,E,T,z=o(4420),L=o(9722),O=o(7528),G=o(5464);const N=G.Ay.div(f||(f=(0,O.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-height: 100%;\n  background-color: #f0f2f5;\n"]))),R=G.Ay.div(h||(h=(0,O.A)(["\n  display: flex;\n  flex-direction: column;\n  width: 700px;\n  height: 450px;\n  background: white;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  overflow: hidden;\n  margin: 20px;\n"]))),P=G.Ay.div(v||(v=(0,O.A)(["\n  flex: 1;\n  display: flex;\n"]))),B=G.Ay.footer(m||(m=(0,O.A)(["\n  width: 90%;\n  margin: 0 auto;\n  border-top: 1px solid #ddd;\n  padding: 10px 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #666;\n  font-size: 12px;\n"]))),J=G.Ay.div(x||(x=(0,O.A)(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media (max-width: 768px) {\n    display: none;\n  }\n"]))),M=G.Ay.img(w||(w=(0,O.A)(["\n  width: 90%;\n  height: 90%;\n  object-fit: cover;\n"]))),U=G.Ay.div(y||(y=(0,O.A)(["\n  flex: 1;\n  padding: 40px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),q=(G.Ay.div(A||(A=(0,O.A)(["\n  position: relative;\n  padding-left: 50px;\n  padding-right: 50px;\n  margin: 0px;\n  border-left: 1px solid black;\n  margin-left: 15px;\n  @media (max-width: 768px) {\n    border-left: none;\n    padding: 0px;\n  }\n"]))),G.Ay.img(b||(b=(0,O.A)(["\n  width: 180px;\n  ","\n"])),(n=>{let{center:e}=n;return e&&"\n    display: block;\n    margin: 0 auto;\n  "}))),D=G.Ay.h2(k||(k=(0,O.A)(["\n  font-size: 13px;\n  font-weight: 500;\n  color: rgb(12, 84, 148);\n  margin-bottom: 25px;\n  text-align: center;\n"]))),W=(G.Ay.p(S||(S=(0,O.A)(["\n  font-size: 14px;\n  color: #666;\n  margin-bottom: 20px;\n"]))),G.Ay.div(j||(j=(0,O.A)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n"]))),G.Ay.button(I||(I=(0,O.A)(["\n  padding: 8px 16px;\n  font-size: 14px;\n  background-color: #0056b3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n  transition: background-color 0.3s ease-in-out;\n\n  &:hover {\n    background-color: #003f7f;\n  }\n\n  &.logout {\n    background-color: #ff3366;\n    &:hover {\n      background-color: #cc0022;\n    }\n  }\n"])))),Z=G.Ay.div(C||(C=(0,O.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),F=G.Ay.p(_||(_=(0,O.A)(["\n  font-size: 15px;\n  color: #333;\n"])));G.Ay.div(E||(E=(0,O.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 20px;\n  gap: 10px;\n"]))),(0,G.Ay)(r.N_)(T||(T=(0,O.A)(["\n  text-decoration: none;\n  color: #0056b3;\n  font-size: 14px;\n  font-weight: bold;\n  transition: color 0.3s ease-in-out;\n\n  &:hover {\n    color: #003f7f;\n  }\n"])));var H=o(482);const K=o.p+"static/media/\uce58\ud1a0.afa220f273ba02a36ddb.jpeg";var Q=o(579);const V="https://ajouclubserver.shop",X=n=>{if(!n)return null;try{return(0,z.s)(n)}catch(e){return console.error("\ud83d\udea8 \ud1a0\ud070 \ub514\ucf54\ub529 \uc624\ub958:",e),null}};const Y=function(){const[n,e]=(0,t.useState)(null),[o,i]=(0,t.useState)(null),[c,l]=(0,t.useState)(!1),a=(0,r.Zp)();(0,t.useEffect)((()=>{l(function(){const n=navigator.userAgent.toLowerCase();return n.includes("instagram")||n.includes("fbav")||n.includes("fban")||n.includes("everytime")||n.includes("kakao")}());const n=localStorage.getItem("accessToken"),o=localStorage.getItem("userInfo");n&&o&&(e(n),i(JSON.parse(o)))}),[]);const d=(0,t.useCallback)((async()=>{try{var n;await L.A.post("".concat(V,"/api/auth/logout"),{},{withCredentials:!0}),alert("\u2705 \ub85c\uadf8\uc544\uc6c3 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),localStorage.clear(),sessionStorage.clear(),alert("\u2705 \ub85c\uadf8\uc544\uc6c3 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),localStorage.clear(),sessionStorage.clear(),null===(n=window.google)||void 0===n||n.accounts.id.disableAutoSelect(),delete L.A.defaults.headers.common.Authorization,e(null),i(null),a("/login")}catch(o){console.error("\ud83d\udea8 \ub85c\uadf8\uc544\uc6c3 \uc2e4\ud328:",o),alert("\ub85c\uadf8\uc544\uc6c3 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}),[a]),u=(0,t.useCallback)((async()=>{try{const n=await L.A.post("".concat(V,"/api/auth/refresh"),{},{withCredentials:!0}),{accessToken:o}=n.data;localStorage.setItem("accessToken",o),L.A.defaults.headers.common.Authorization="Bearer ".concat(o),e(o),console.log("\u2705 Access Token\uc774 \uac31\uc2e0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(n){console.error("\ud83d\udea8 Access Token \uac31\uc2e0 \uc2e4\ud328:",n),d()}}),[d]),p=(0,t.useCallback)((()=>{const n=localStorage.getItem("accessToken");if(!n)return;const e=X(n);if(!e)return console.warn("\ud83d\udea8 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ud1a0\ud070\uc785\ub2c8\ub2e4. \ub85c\uadf8\uc544\uc6c3 \ucc98\ub9ac!"),void d();const o=Date.now()/1e3;e.exp<o&&(console.warn("\ud83d\udd04 Access Token\uc774 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uac31\uc2e0 \uc2dc\ub3c4 \uc911..."),u())}),[u,d]);return(0,t.useEffect)((()=>{const n=setInterval(p,6e4);return()=>clearInterval(n)}),[p]),(0,Q.jsx)(s,{clientId:"67500785353-oq4u26r3uek1s7b569sfr52sjkvj7j36.apps.googleusercontent.com",children:(0,Q.jsx)(N,{children:(0,Q.jsxs)(R,{children:[(0,Q.jsxs)(P,{children:[(0,Q.jsx)(J,{children:(0,Q.jsx)(M,{src:K,alt:"\uc544\uc8fc\ub300\ud559\uad50 \ub9c8\uc2a4\ucf54\ud2b8"})}),(0,Q.jsxs)(U,{children:[(0,Q.jsx)(q,{src:H,alt:"\uc544\uc8fc\ub300\ud559\uad50 \ub85c\uace0",center:c?1:0}),(0,Q.jsx)(D,{children:"\uc544\uc8fc\ub300\ud559\uad50 \uacc4\uc815\ub9cc \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4."}),n?(0,Q.jsxs)(Z,{children:[(0,Q.jsxs)(F,{children:["\ud658\uc601\ud569\ub2c8\ub2e4,"," ",(null===o||void 0===o?void 0:o.user_name)||(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o?void 0:o.nickname)||(null===o||void 0===o?void 0:o.email)," ","\ub2d8!"]}),(0,Q.jsx)(W,{className:"logout",onClick:d,children:"\ub85c\uadf8\uc544\uc6c3"})]}):c?(0,Q.jsxs)("div",{style:{textAlign:"center",margin:"0 0 16px 0"},children:[(0,Q.jsx)("p",{style:{color:"#ff4f4f",fontWeight:"bold"},children:"\uc778\uc571 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uad6c\uae00 \ub85c\uadf8\uc778\uc774 \uc6d0\ud65c\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Q.jsx)(W,{onClick:()=>{const n=window.location.href;navigator.userAgent.toLowerCase().includes("android")?window.location.href="intent://".concat(n.replace(/^https?:\/\//,""),"#Intent;scheme=https;package=com.android.chrome;end"):window.open(n,"_blank")},children:"\uc678\ubd80 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc5f4\uae30"}),(0,Q.jsx)("p",{style:{fontSize:"0.8rem",marginTop:"16px"},children:'* \uc790\ub3d9 \uc774\ub3d9\uc774 \ub418\uc9c0 \uc54a\uc73c\uba74, \ube0c\ub77c\uc6b0\uc800 \uc6b0\uce21 \uc0c1\ub2e8 \uba54\ub274\uc5d0\uc11c "\uc678\ubd80 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc5f4\uae30"\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.'})]}):(0,Q.jsx)(g,{onSuccess:async n=>{try{console.log("\u2705 Google OAuth \uc131\uacf5:",n);const o=(0,z.s)(n.credential);console.log("\ud83d\udd39 \ud604\uc7ac \ub85c\uadf8\uc778\ud55c Google \uc774\uba54\uc77c:",o.email);const t=await L.A.post("".concat(V,"/api/auth/google"),{token:n.credential},{withCredentials:!0}),{accessToken:r}=t.data,c=X(r);console.log("\u2705 \ub514\ucf54\ub529\ub41c Access Token:",c),localStorage.setItem("accessToken",r),localStorage.setItem("userInfo",JSON.stringify(c)),L.A.defaults.headers.common.Authorization="Bearer ".concat(r),e(r),i(c),alert("\ud658\uc601\ud569\ub2c8\ub2e4, ".concat(c.user_name,"\ub2d8!")),a("/")}catch(o){console.error("\ud83d\udea8 Google \ub85c\uadf8\uc778 \uc2e4\ud328:",o.response||o),alert("Google \ub85c\uadf8\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},onError:()=>alert("Google \ub85c\uadf8\uc778 \uc2e4\ud328!"),auto_select:!1,useOneTap:!1,prompt:"select_account"})]})]}),(0,Q.jsxs)(B,{children:[(0,Q.jsx)("span",{children:"\uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68"}),(0,Q.jsx)("span",{children:"\xa9 2024 Ajou University"})]})]})})})}},4420:(n,e,o)=>{o.d(e,{s:()=>i});class t extends Error{}function r(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(n){return decodeURIComponent(atob(n).replace(/(.)/g,((n,e)=>{let o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(e)}catch(o){return atob(e)}}function i(n,e){if("string"!==typeof n)throw new t("Invalid token specified: must be a string");e||(e={});const o=!0===e.header?0:1,i=n.split(".")[o];if("string"!==typeof i)throw new t("Invalid token specified: missing part #".concat(o+1));let c;try{c=r(i)}catch(l){throw new t("Invalid token specified: invalid base64 for part #".concat(o+1," (").concat(l.message,")"))}try{return JSON.parse(c)}catch(l){throw new t("Invalid token specified: invalid json for part #".concat(o+1," (").concat(l.message,")"))}}t.prototype.name="InvalidTokenError"}}]);
//# sourceMappingURL=958.b87bdc67.chunk.js.map